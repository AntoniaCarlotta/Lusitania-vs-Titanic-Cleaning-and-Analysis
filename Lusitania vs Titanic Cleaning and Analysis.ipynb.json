{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Project 2:  Lucid Titanic Sleuthing"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Part 1: Developing an understanding of the data"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Based on the description of the data you read in the readme describe in your own words this data."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "There are two sets of data here, each representing passengers on differents shipwrecks: the Titanic, which struck an iceberg on April 15, 1912, and the Lusitania, which was hit by a German torpedo on May 7, 1915, and sank after just 18 mninutes.\n",
    "\n",
    "The Titanic data includes their name, class, sex, survival, age, ticket number, fare, cabin, destination, and where they embarked from.\n",
    "\n",
    "The Lusitania data includes their name and title, age, department/class, passenger/crew status, position, city, county, state, lifeboat, rescue vessel, body #, ticket #, cabin #, companions, values, adult/minor, and sex."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Based on our conceptual understanding of the columns in this data set.  What are the reasonable range of the values for the Sex, Age, SibSp, Parch columns."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "\n",
    "Sex, in this instance, is binary and should be either Male or Female.\n",
    "Age can start with a decimal close to 0 for babies, up to the 80s or potentially 90s for adults.\n",
    "\n",
    "SibSp refers to siblings and spouses. It will usually be less than 5, and ought to always be less than 10.\n",
    "\n",
    "Parch stands for parents and children. As with SibSp, it will most likely always be less than 10, and usually less than 5."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Open the data in sublime text is there anything that jumps out to you?"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "There is a great deal of data, and many null values. The Lusitania data is especially bad."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Part 2: reading the data in"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Now read the data into a Pandas DataFrame"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {
    "collapsed": false
   },
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "\n",
    "dft = pd.read_csv('assets/titanic.csv')\n",
    "dfl = pd.read_csv('assets/lusitania.csv')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Check that the age column doesn't have any unreasonable values "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "min age:  0.17\n",
      "max age:  80.0\n"
     ]
    }
   ],
   "source": [
    "print 'min age: ', dft['age'].min()\n",
    "print 'max age: ', dft['age'].max()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<bound method Series.sort of age    name                                                      \n",
       "0.17   Dean, Miss. Elizabeth Gladys \"Millvina\"                        0.17\n",
       "0.33   Danbom, Master. Gilbert Sigvard Emanuel                        0.33\n",
       "0.42   Thomas, Master. Assad Alexander                                0.42\n",
       "0.67   Hamalainen, Master. Viljo                                      0.67\n",
       "0.75   Baclini, Miss. Eugenie                                         0.75\n",
       "       Baclini, Miss. Helene Barbara                                  0.75\n",
       "       Peacock, Master. Alfred Edward                                 0.75\n",
       "0.83   Aks, Master. Philip Frank                                      0.83\n",
       "       Caldwell, Master. Alden Gates                                  0.83\n",
       "       Richards, Master. George Sibley                                0.83\n",
       "0.92   Allison, Master. Hudson Trevor                                 0.92\n",
       "       West, Miss. Barbara J                                          0.92\n",
       "1.00   Becker, Master. Richard F                                      1.00\n",
       "       Dean, Master. Bertram Vere                                     1.00\n",
       "       Goodwin, Master. Sidney Leonard                                1.00\n",
       "       Johnson, Miss. Eleanor Ileen                                   1.00\n",
       "       Klasen, Miss. Gertrud Emilia                                   1.00\n",
       "       Laroche, Miss. Louise                                          1.00\n",
       "       Mallet, Master. Andre                                          1.00\n",
       "       Nakid, Miss. Maria (\"Mary\")                                    1.00\n",
       "       Panula, Master. Eino Viljami                                   1.00\n",
       "       Sandstrom, Miss. Beatrice Irene                                1.00\n",
       "2.00   Allison, Miss. Helen Loraine                                   2.00\n",
       "       Andersson, Miss. Ellis Anna Maria                              2.00\n",
       "       Hirvonen, Miss. Hildur E                                       2.00\n",
       "       Navratil, Master. Edmond Roger                                 2.00\n",
       "       Palsson, Master. Gosta Leonard                                 2.00\n",
       "       Panula, Master. Urho Abraham                                   2.00\n",
       "       Quick, Miss. Phyllis May                                       2.00\n",
       "       Rice, Master. Eugene                                           2.00\n",
       "                                                                     ...  \n",
       "61.00  Ryerson, Mr. Arthur Larned                                    61.00\n",
       "       Sutton, Mr. Frederick                                         61.00\n",
       "       Van der hoef, Mr. Wyckoff                                     61.00\n",
       "62.00  Harris, Mr. George                                            62.00\n",
       "       Myles, Mr. Thomas Francis                                     62.00\n",
       "       Stead, Mr. William Thomas                                     62.00\n",
       "       Stone, Mrs. George Nelson (Martha Evelyn)                     62.00\n",
       "       Wright, Mr. George                                            62.00\n",
       "63.00  Andrews, Miss. Kornelia Theodosia                             63.00\n",
       "       Howard, Mr. Benjamin                                          63.00\n",
       "       Straus, Mrs. Isidor (Rosalie Ida Blun)                        63.00\n",
       "       Turkula, Mrs. (Hedwig)                                        63.00\n",
       "64.00  Compton, Mrs. Alexander Taylor (Mary Eliza Ingersoll)         64.00\n",
       "       Crosby, Mrs. Edward Gifford (Catherine Elizabeth Halstead)    64.00\n",
       "       Fortune, Mr. Mark                                             64.00\n",
       "       Nicholson, Mr. Arthur Ernest                                  64.00\n",
       "       Warren, Mr. Frank Manley                                      64.00\n",
       "65.00  Duane, Mr. Frank                                              65.00\n",
       "       Millet, Mr. Francis Davis                                     65.00\n",
       "       Ostby, Mr. Engelhart Cornelius                                65.00\n",
       "66.00  Wheadon, Mr. Edward H                                         66.00\n",
       "67.00  Straus, Mr. Isidor                                            67.00\n",
       "70.00  Crosby, Capt. Edward Gifford                                  70.00\n",
       "       Mitchell, Mr. Henry Michael                                   70.00\n",
       "70.50  Connors, Mr. Patrick                                          70.50\n",
       "71.00  Artagaveytia, Mr. Ramon                                       71.00\n",
       "       Goldschmidt, Mr. George B                                     71.00\n",
       "74.00  Svensson, Mr. Johan                                           74.00\n",
       "76.00  Cavendish, Mrs. Tyrell William (Julia Florence Siegel)        76.00\n",
       "80.00  Barkworth, Mr. Algernon Henry Wilson                          80.00\n",
       "Name: age, dtype: float64>"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft[(\"age\")]\n",
    "dft.groupby(['age', 'name'], as_index=False)['age'].max().sort"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The minimum age is .17 (meaning a baby under 1 years old), and the maximum is 80. These seem very reasonable."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Check for missing values.  How do you know that a value is missing?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "pclass          0\n",
       "survived        0\n",
       "name            0\n",
       "sex             0\n",
       "age           263\n",
       "sibsp           0\n",
       "parch           0\n",
       "ticket          0\n",
       "fare            1\n",
       "cabin        1014\n",
       "embarked        2\n",
       "boat          823\n",
       "body         1188\n",
       "home.dest     564\n",
       "dtype: int64"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft.isnull().sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>pclass</th>\n",
       "      <th>survived</th>\n",
       "      <th>name</th>\n",
       "      <th>sex</th>\n",
       "      <th>age</th>\n",
       "      <th>sibsp</th>\n",
       "      <th>parch</th>\n",
       "      <th>ticket</th>\n",
       "      <th>fare</th>\n",
       "      <th>cabin</th>\n",
       "      <th>embarked</th>\n",
       "      <th>boat</th>\n",
       "      <th>body</th>\n",
       "      <th>home.dest</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>True</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>False</td>\n",
       "      <td>True</td>\n",
       "      <td>True</td>\n",
       "      <td>False</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "  pclass survived   name    sex    age  sibsp  parch ticket   fare  cabin  \\\n",
       "0  False    False  False  False  False  False  False  False  False  False   \n",
       "1  False    False  False  False  False  False  False  False  False  False   \n",
       "2  False    False  False  False  False  False  False  False  False  False   \n",
       "3  False    False  False  False  False  False  False  False  False  False   \n",
       "4  False    False  False  False  False  False  False  False  False  False   \n",
       "\n",
       "  embarked   boat   body home.dest  \n",
       "0    False  False   True     False  \n",
       "1    False  False   True     False  \n",
       "2    False   True   True     False  \n",
       "3    False   True  False     False  \n",
       "4    False   True   True     False  "
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft.isnull().head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Does it makes sense to guess at the value?"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "In the case of age, it does make sense to guess for the value. We can do this by finding the mean age of others with the same title (ie Mr., Master, Miss, etc), and using that as their age estimate."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Part 3: data imputation"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Well let’s say that it does... You likely noticed that Age has some missing values. How many are missing?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "263"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft['age'].isnull().sum()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### For the Age of the passengers ... how would you guess at the missing values using the other data present in the CSV."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Titles (such as \"Doctor\", \"Master\", \"Colonel\", etc) can be a good indicator of someone's age. I will separate the title from the name of each passenger, then impute the mean age for that title. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "['Miss', 'Master', 'Mr', 'Mrs', 'Col', 'Mme', 'Dr', 'Major', 'Capt', 'Lady', 'Sir', 'Mlle', 'Dona', 'Jonkheer', 'the Countess', 'Don', 'Rev', 'Ms']\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "[('Sir', 1),\n",
       " ('Major', 2),\n",
       " ('the Countess', 1),\n",
       " ('Don', 1),\n",
       " ('Mlle', 2),\n",
       " ('Capt', 1),\n",
       " ('Dr', 8),\n",
       " ('Lady', 1),\n",
       " ('Rev', 8),\n",
       " ('Mrs', 197),\n",
       " ('Dona', 1),\n",
       " ('Jonkheer', 1),\n",
       " ('Master', 61),\n",
       " ('Ms', 2),\n",
       " ('Mr', 757),\n",
       " ('Mme', 1),\n",
       " ('Miss', 260),\n",
       " ('Col', 4)]"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "title = []\n",
    "title_count = {}\n",
    "\n",
    "for i in dft.name:\n",
    "    a = i.split(',')\n",
    "    b = a[1].split('.')\n",
    "    c = b[0].strip()\n",
    "    title_count[c] = title_count.get(c, 0) + 1\n",
    "    if c not in title:\n",
    "        title.append(c)\n",
    "print title\n",
    "title_count.items()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "for i in dft.name:\n",
    "    def thetitle(i):\n",
    "        d = i.split(',')\n",
    "        e = d[1].split('.')\n",
    "        f = e[0].strip()\n",
    "        return f\n",
    "\n",
    "dft['title'] = dft['name'].apply(thetitle)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "dft['age'] = dft['age'].fillna(dft.groupby(\"title\")[\"age\"].transform(\"mean\"))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Part 4: Group Statistics"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "#### Are there any groups that were especially adversely affected in the Titanic wreck? (justify your response numerically)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>survived</th>\n",
       "      <th>0</th>\n",
       "      <th>1</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>embarked</th>\n",
       "      <th>pclass</th>\n",
       "      <th>sex</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"6\" valign=\"top\">C</th>\n",
       "      <th rowspan=\"2\" valign=\"top\">1</th>\n",
       "      <th>female</th>\n",
       "      <td>2</td>\n",
       "      <td>69</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>42</td>\n",
       "      <td>28</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">2</th>\n",
       "      <th>female</th>\n",
       "      <td>0</td>\n",
       "      <td>11</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>12</td>\n",
       "      <td>5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">3</th>\n",
       "      <th>female</th>\n",
       "      <td>9</td>\n",
       "      <td>22</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>55</td>\n",
       "      <td>15</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"6\" valign=\"top\">Q</th>\n",
       "      <th rowspan=\"2\" valign=\"top\">1</th>\n",
       "      <th>female</th>\n",
       "      <td>0</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">2</th>\n",
       "      <th>female</th>\n",
       "      <td>0</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>5</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">3</th>\n",
       "      <th>female</th>\n",
       "      <td>23</td>\n",
       "      <td>33</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>50</td>\n",
       "      <td>7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"6\" valign=\"top\">S</th>\n",
       "      <th rowspan=\"2\" valign=\"top\">1</th>\n",
       "      <th>female</th>\n",
       "      <td>3</td>\n",
       "      <td>66</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>75</td>\n",
       "      <td>33</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">2</th>\n",
       "      <th>female</th>\n",
       "      <td>12</td>\n",
       "      <td>81</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>129</td>\n",
       "      <td>20</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">3</th>\n",
       "      <th>female</th>\n",
       "      <td>78</td>\n",
       "      <td>51</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>male</th>\n",
       "      <td>313</td>\n",
       "      <td>53</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "survived                  0   1\n",
       "embarked pclass sex            \n",
       "C        1      female    2  69\n",
       "                male     42  28\n",
       "         2      female    0  11\n",
       "                male     12   5\n",
       "         3      female    9  22\n",
       "                male     55  15\n",
       "Q        1      female    0   2\n",
       "                male      1   0\n",
       "         2      female    0   2\n",
       "                male      5   0\n",
       "         3      female   23  33\n",
       "                male     50   7\n",
       "S        1      female    3  66\n",
       "                male     75  33\n",
       "         2      female   12  81\n",
       "                male    129  20\n",
       "         3      female   78  51\n",
       "                male    313  53"
      ]
     },
     "execution_count": 24,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft.pivot_table('body', index=['embarked', 'pclass', 'sex'], columns=['survived'], aggfunc=len, fill_value=0)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "sex\n",
       "female    0.727468\n",
       "male      0.190985\n",
       "Name: survived, dtype: float64"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft.pivot_table(index = [\"sex\"])[\"survived\"]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "72% of women survived, while only 19% of men survived. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "pclass  sex   \n",
       "1       female    0.965278\n",
       "        male      0.340782\n",
       "2       female    0.886792\n",
       "        male      0.146199\n",
       "3       female    0.490741\n",
       "        male      0.152130\n",
       "Name: survived, dtype: float64"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft.pivot_table('survived',index = [\"pclass\", \"sex\"])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "First class females were almost sure to survive, at 96.5%. Conversely, second and third class males only had a survival rate of 14% and 15% respectively. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "sex     embarked\n",
       "female  C           0.902655\n",
       "        Q           0.616667\n",
       "        S           0.680412\n",
       "male    C           0.305732\n",
       "        Q           0.111111\n",
       "        S           0.170144\n",
       "Name: survived, dtype: float64"
      ]
     },
     "execution_count": 23,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft.pivot_table(index = [\"sex\", \"embarked\"])[\"survived\"]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Cherbourg had the greatest rate of survivors when compared to Queenstown and Southampton."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>survived</th>\n",
       "      <th>0</th>\n",
       "      <th>1</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>pclass</th>\n",
       "      <th>parch</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"5\" valign=\"top\">1</th>\n",
       "      <th>0</th>\n",
       "      <td>101</td>\n",
       "      <td>141</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>14</td>\n",
       "      <td>36</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>6</td>\n",
       "      <td>21</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">2</th>\n",
       "      <th>0</th>\n",
       "      <td>142</td>\n",
       "      <td>64</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>12</td>\n",
       "      <td>31</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>4</td>\n",
       "      <td>21</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0</td>\n",
       "      <td>3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"8\" valign=\"top\">3</th>\n",
       "      <th>0</th>\n",
       "      <td>423</td>\n",
       "      <td>131</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>44</td>\n",
       "      <td>33</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>46</td>\n",
       "      <td>15</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>5</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "survived        0    1\n",
       "pclass parch          \n",
       "1      0      101  141\n",
       "       1       14   36\n",
       "       2        6   21\n",
       "       3        1    1\n",
       "       4        1    1\n",
       "2      0      142   64\n",
       "       1       12   31\n",
       "       2        4   21\n",
       "       3        0    3\n",
       "3      0      423  131\n",
       "       1       44   33\n",
       "       2       46   15\n",
       "       3        2    1\n",
       "       4        4    0\n",
       "       5        5    1\n",
       "       6        2    0\n",
       "       9        2    0"
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dft.pivot_table('body', index=['pclass','parch'], columns=['survived'], aggfunc=len, fill_value=0)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In the case of both first and third class, the more children a parent had, the more likely they were to perish. In third class, only two parents with three or more children survived. In first class, there were two parents with three and four children, and in each case, one parent survived and one did not. This however, does not reflect upon the survival rate of the children in these families."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Are there any groups that outperformed the survival of the latter group? (justify your response numerically)\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "Third class men outperformed second class men (15.2% to 14.6%.) Cherbourg had a female survival rating of 90%, as opposed to females across all cities which was only 72%."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "## Part 5:  Comparative Statistics:  Lusitania"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Family name</th>\n",
       "      <th>Title</th>\n",
       "      <th>Personal name</th>\n",
       "      <th>Fate</th>\n",
       "      <th>Age</th>\n",
       "      <th>Department/Class</th>\n",
       "      <th>Passenger/Crew</th>\n",
       "      <th>Citizenship</th>\n",
       "      <th>Position</th>\n",
       "      <th>Status</th>\n",
       "      <th>...</th>\n",
       "      <th>Country</th>\n",
       "      <th>Lifeboat</th>\n",
       "      <th>Rescue Vessel</th>\n",
       "      <th>Body No.</th>\n",
       "      <th>Ticket No.</th>\n",
       "      <th>Cabin No.</th>\n",
       "      <th>Traveling Companions and other notes</th>\n",
       "      <th>Value</th>\n",
       "      <th>Adult/Minor</th>\n",
       "      <th>Sex</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>CAMERON</td>\n",
       "      <td>Mr.</td>\n",
       "      <td>Charles W.</td>\n",
       "      <td>Lost</td>\n",
       "      <td>38</td>\n",
       "      <td>Band</td>\n",
       "      <td>Crew</td>\n",
       "      <td>British</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1</td>\n",
       "      <td>Adult</td>\n",
       "      <td>Male</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>CARR-JONES</td>\n",
       "      <td>Mr.</td>\n",
       "      <td>E.</td>\n",
       "      <td>Lost</td>\n",
       "      <td>37</td>\n",
       "      <td>Band</td>\n",
       "      <td>Crew</td>\n",
       "      <td>British</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1</td>\n",
       "      <td>Adult</td>\n",
       "      <td>Male</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>DRAKEFORD</td>\n",
       "      <td>Mr.</td>\n",
       "      <td>Edward</td>\n",
       "      <td>Saved</td>\n",
       "      <td>30</td>\n",
       "      <td>Band</td>\n",
       "      <td>Crew</td>\n",
       "      <td>British</td>\n",
       "      <td>Violin</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1</td>\n",
       "      <td>Adult</td>\n",
       "      <td>Male</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>HAWKINS</td>\n",
       "      <td>Mr.</td>\n",
       "      <td>Handel</td>\n",
       "      <td>Saved</td>\n",
       "      <td>25</td>\n",
       "      <td>Band</td>\n",
       "      <td>Crew</td>\n",
       "      <td>British</td>\n",
       "      <td>Cello</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1</td>\n",
       "      <td>Adult</td>\n",
       "      <td>Male</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>HEMINGWAY</td>\n",
       "      <td>Mr.</td>\n",
       "      <td>John William</td>\n",
       "      <td>Saved</td>\n",
       "      <td>27</td>\n",
       "      <td>Band</td>\n",
       "      <td>Crew</td>\n",
       "      <td>British</td>\n",
       "      <td>Double Bass</td>\n",
       "      <td>NaN</td>\n",
       "      <td>...</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>1</td>\n",
       "      <td>Adult</td>\n",
       "      <td>Male</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 23 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "  Family name Title Personal name   Fate Age Department/Class Passenger/Crew  \\\n",
       "0     CAMERON   Mr.    Charles W.   Lost  38             Band           Crew   \n",
       "1  CARR-JONES   Mr.            E.   Lost  37             Band           Crew   \n",
       "2   DRAKEFORD   Mr.        Edward  Saved  30             Band           Crew   \n",
       "3     HAWKINS   Mr.        Handel  Saved  25             Band           Crew   \n",
       "4   HEMINGWAY   Mr.  John William  Saved  27             Band           Crew   \n",
       "\n",
       "  Citizenship     Position Status  ...  Country Lifeboat Rescue Vessel  \\\n",
       "0     British          NaN    NaN  ...      NaN      NaN           NaN   \n",
       "1     British          NaN    NaN  ...      NaN      NaN           NaN   \n",
       "2     British       Violin    NaN  ...      NaN      NaN           NaN   \n",
       "3     British        Cello    NaN  ...      NaN      NaN           NaN   \n",
       "4     British  Double Bass    NaN  ...      NaN      NaN           NaN   \n",
       "\n",
       "  Body No. Ticket No. Cabin No. Traveling Companions and other notes Value  \\\n",
       "0      NaN        NaN       NaN                                  NaN     1   \n",
       "1      NaN        NaN       NaN                                  NaN     1   \n",
       "2      NaN        NaN       NaN                                  NaN     1   \n",
       "3      NaN        NaN       NaN                                  NaN     1   \n",
       "4      NaN        NaN       NaN                                  NaN     1   \n",
       "\n",
       "  Adult/Minor   Sex  \n",
       "0       Adult  Male  \n",
       "1       Adult  Male  \n",
       "2       Adult  Male  \n",
       "3       Adult  Male  \n",
       "4       Adult  Male  \n",
       "\n",
       "[5 rows x 23 columns]"
      ]
     },
     "execution_count": 27,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dfl.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Family name                                0\n",
       "Title                                      0\n",
       "Personal name                              3\n",
       "Fate                                       0\n",
       "Age                                      653\n",
       "Department/Class                           0\n",
       "Passenger/Crew                             0\n",
       "Citizenship                                2\n",
       "Position                                1270\n",
       "Status                                  1166\n",
       "City                                     682\n",
       "County                                  1890\n",
       "State                                    929\n",
       "Country                                  638\n",
       "Lifeboat                                1829\n",
       "Rescue Vessel                           1810\n",
       "Body No.                                1750\n",
       "Ticket No.                              1677\n",
       "Cabin No.                               1632\n",
       "Traveling Companions and other notes    1363\n",
       "Value                                      0\n",
       "Adult/Minor                                0\n",
       "Sex                                        0\n",
       "dtype: int64"
      ]
     },
     "execution_count": 28,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dfl.isnull().sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "('saved: ', 763)\n",
      "('lost: ', 1193)\n",
      "('trauma: ', 4)\n",
      "('not on board: ', 1)\n"
     ]
    }
   ],
   "source": [
    "saved = 0\n",
    "lost = 0\n",
    "trauma = 0\n",
    "nob = 0\n",
    "\n",
    "for i in dfl.Fate:\n",
    "    if i == 'Saved':\n",
    "        saved += 1\n",
    "    if i == 'Lost':\n",
    "        lost += 1\n",
    "    if i == 'Saved (died from trauma)':\n",
    "        trauma +=1\n",
    "    if i == \"Not on board\":\n",
    "        nob +=1 \n",
    "print (\"saved: \", saved)\n",
    "print  (\"lost: \", lost)\n",
    "print (\"trauma: \", trauma)\n",
    "print (\"not on board: \", nob)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "0        38\n",
       "1        37\n",
       "2        30\n",
       "3        25\n",
       "4        27\n",
       "5        48\n",
       "6       NaN\n",
       "7       NaN\n",
       "8        24\n",
       "9        19\n",
       "10       57\n",
       "11       50\n",
       "12      NaN\n",
       "13      NaN\n",
       "14      NaN\n",
       "15      NaN\n",
       "16      NaN\n",
       "17      NaN\n",
       "18      NaN\n",
       "19      NaN\n",
       "20      NaN\n",
       "21      NaN\n",
       "22      NaN\n",
       "23       25\n",
       "24      NaN\n",
       "25       56\n",
       "26      NaN\n",
       "27       41\n",
       "28      NaN\n",
       "29      NaN\n",
       "       ... \n",
       "1931     44\n",
       "1932    NaN\n",
       "1933    NaN\n",
       "1934    NaN\n",
       "1935    NaN\n",
       "1936    NaN\n",
       "1937     27\n",
       "1938    NaN\n",
       "1939    NaN\n",
       "1940    NaN\n",
       "1941    NaN\n",
       "1942     51\n",
       "1943    NaN\n",
       "1944     23\n",
       "1945    NaN\n",
       "1946    NaN\n",
       "1947    NaN\n",
       "1948    NaN\n",
       "1949    NaN\n",
       "1950    NaN\n",
       "1951    NaN\n",
       "1952    NaN\n",
       "1953    NaN\n",
       "1954     31\n",
       "1955     35\n",
       "1956    NaN\n",
       "1957    NaN\n",
       "1958    NaN\n",
       "1959     16\n",
       "1960     37\n",
       "Name: Age, dtype: object"
      ]
     },
     "execution_count": 30,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def is_number(s):\n",
    "    try:\n",
    "        float(s)\n",
    "        return True\n",
    "    except ValueError:\n",
    "        return False\n",
    "def clean_it(s):\n",
    "    output = ''\n",
    "    for elm in str(s):\n",
    "        if is_number(elm):\n",
    "            output+=elm\n",
    "    if output != '':\n",
    "        return output\n",
    "    else:\n",
    "        return np.nan\n",
    "\n",
    "dfl['Age'].apply(clean_it)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "NaN is so prevalent in the values for the Lusitania, and the data is so \"dirty\" that it doesn't make sense to try to fill in missing values. Instead, the best way to look at age for the Lusitania is to analyze the Adult/Minor column."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "#### Are there any groups that were especially adversely affected in the Titanic wreck? (justify your response numerically)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {
    "collapsed": false,
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th>Fate</th>\n",
       "      <th>Lost</th>\n",
       "      <th>Not on board</th>\n",
       "      <th>Saved</th>\n",
       "      <th>Saved (died from trauma)</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Adult/Minor</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Adult</th>\n",
       "      <td>1082</td>\n",
       "      <td>1</td>\n",
       "      <td>705</td>\n",
       "      <td>3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Infant</th>\n",
       "      <td>37</td>\n",
       "      <td>0</td>\n",
       "      <td>9</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Minor</th>\n",
       "      <td>70</td>\n",
       "      <td>0</td>\n",
       "      <td>49</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Minor?</th>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "Fate         Lost  Not on board  Saved  Saved (died from trauma)\n",
       "Adult/Minor                                                     \n",
       "Adult        1082             1    705                         3\n",
       "Infant         37             0      9                         1\n",
       "Minor          70             0     49                         0\n",
       "Minor?          4             0      0                         0"
      ]
     },
     "execution_count": 32,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dfl.pivot_table('Citizenship', index=['Adult/Minor'], columns=['Fate'], aggfunc=len, fill_value=0)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Adults had a 39% chance of survival in general. Children had an even lower survival rate at just 34%."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th>Fate</th>\n",
       "      <th>Lost</th>\n",
       "      <th>Not on board</th>\n",
       "      <th>Saved</th>\n",
       "      <th>Saved (died from trauma)</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Department/Class</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Band</th>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Deck</th>\n",
       "      <td>32</td>\n",
       "      <td>0</td>\n",
       "      <td>37</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Engineering</th>\n",
       "      <td>201</td>\n",
       "      <td>0</td>\n",
       "      <td>112</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Saloon</th>\n",
       "      <td>177</td>\n",
       "      <td>1</td>\n",
       "      <td>112</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Second</th>\n",
       "      <td>372</td>\n",
       "      <td>0</td>\n",
       "      <td>227</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Stowaway</th>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Third</th>\n",
       "      <td>236</td>\n",
       "      <td>0</td>\n",
       "      <td>134</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Third (Distressed British Seaman)</th>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Victualling</th>\n",
       "      <td>167</td>\n",
       "      <td>0</td>\n",
       "      <td>138</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "Fate                               Lost  Not on board  Saved  \\\n",
       "Department/Class                                               \n",
       "Band                                  2             0      3   \n",
       "Deck                                 32             0     37   \n",
       "Engineering                         201             0    112   \n",
       "Saloon                              177             1    112   \n",
       "Second                              372             0    227   \n",
       "Stowaway                              3             0      0   \n",
       "Third                               236             0    134   \n",
       "Third (Distressed British Seaman)     3             0      0   \n",
       "Victualling                         167             0    138   \n",
       "\n",
       "Fate                               Saved (died from trauma)  \n",
       "Department/Class                                             \n",
       "Band                                                      0  \n",
       "Deck                                                      0  \n",
       "Engineering                                               0  \n",
       "Saloon                                                    1  \n",
       "Second                                                    2  \n",
       "Stowaway                                                  0  \n",
       "Third                                                     0  \n",
       "Third (Distressed British Seaman)                         0  \n",
       "Victualling                                               1  "
      ]
     },
     "execution_count": 34,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dfl.pivot_table('Citizenship', index=['Department/Class'], columns=['Fate'], aggfunc=len, fill_value=0)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Fate</th>\n",
       "      <th>Lost</th>\n",
       "      <th>Not on board</th>\n",
       "      <th>Saved</th>\n",
       "      <th>Saved (died from trauma)</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Department/Class</th>\n",
       "      <th>Title</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Band</th>\n",
       "      <th>Mr.</th>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"4\" valign=\"top\">Deck</th>\n",
       "      <th>Captain</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Dr.</th>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Master</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mr.</th>\n",
       "      <td>29</td>\n",
       "      <td>0</td>\n",
       "      <td>36</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Engineering</th>\n",
       "      <th>Master</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mr.</th>\n",
       "      <td>200</td>\n",
       "      <td>0</td>\n",
       "      <td>112</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"16\" valign=\"top\">Saloon</th>\n",
       "      <th>Captain</th>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Commander</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Detective-Inspector</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Dr.</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Father</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Lady</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Lieutenant</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Master</th>\n",
       "      <td>10</td>\n",
       "      <td>0</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miss</th>\n",
       "      <td>21</td>\n",
       "      <td>0</td>\n",
       "      <td>13</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mr.</th>\n",
       "      <td>104</td>\n",
       "      <td>0</td>\n",
       "      <td>68</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mr. (later Sir)</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mrs.</th>\n",
       "      <td>35</td>\n",
       "      <td>1</td>\n",
       "      <td>19</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Professor</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Reverend</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sir</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Surgeon-Major</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"9\" valign=\"top\">Second</th>\n",
       "      <th>Dr.</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Lieutenant</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Master</th>\n",
       "      <td>29</td>\n",
       "      <td>0</td>\n",
       "      <td>18</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miss</th>\n",
       "      <td>90</td>\n",
       "      <td>0</td>\n",
       "      <td>48</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mr.</th>\n",
       "      <td>154</td>\n",
       "      <td>0</td>\n",
       "      <td>92</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mrs.</th>\n",
       "      <td>94</td>\n",
       "      <td>0</td>\n",
       "      <td>60</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Professor</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Reverend</th>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Sister</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Stowaway</th>\n",
       "      <th>Mr.</th>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"5\" valign=\"top\">Third</th>\n",
       "      <th>Dr.</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Master</th>\n",
       "      <td>18</td>\n",
       "      <td>0</td>\n",
       "      <td>9</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miss</th>\n",
       "      <td>32</td>\n",
       "      <td>0</td>\n",
       "      <td>19</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mr.</th>\n",
       "      <td>149</td>\n",
       "      <td>0</td>\n",
       "      <td>85</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mrs.</th>\n",
       "      <td>36</td>\n",
       "      <td>0</td>\n",
       "      <td>21</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Third (Distressed British Seaman)</th>\n",
       "      <th>Mr.</th>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"5\" valign=\"top\">Victualling</th>\n",
       "      <th>Master</th>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>6</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Master (?)</th>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miss</th>\n",
       "      <td>11</td>\n",
       "      <td>0</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mr.</th>\n",
       "      <td>146</td>\n",
       "      <td>0</td>\n",
       "      <td>123</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mrs.</th>\n",
       "      <td>5</td>\n",
       "      <td>0</td>\n",
       "      <td>5</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "Fate                                                   Lost  Not on board  \\\n",
       "Department/Class                  Title                                     \n",
       "Band                              Mr.                     2             0   \n",
       "Deck                              Captain                 0             0   \n",
       "                                  Dr.                     2             0   \n",
       "                                  Master                  1             0   \n",
       "                                  Mr.                    29             0   \n",
       "Engineering                       Master                  1             0   \n",
       "                                  Mr.                   200             0   \n",
       "Saloon                            Captain                 2             0   \n",
       "                                  Commander               1             0   \n",
       "                                  Detective-Inspector     0             0   \n",
       "                                  Dr.                     1             0   \n",
       "                                  Father                  1             0   \n",
       "                                  Lady                    0             0   \n",
       "                                  Lieutenant              0             0   \n",
       "                                  Master                 10             0   \n",
       "                                  Miss                   21             0   \n",
       "                                  Mr.                   104             0   \n",
       "                                  Mr. (later Sir)         0             0   \n",
       "                                  Mrs.                   35             1   \n",
       "                                  Professor               1             0   \n",
       "                                  Reverend                0             0   \n",
       "                                  Sir                     1             0   \n",
       "                                  Surgeon-Major           0             0   \n",
       "Second                            Dr.                     0             0   \n",
       "                                  Lieutenant              1             0   \n",
       "                                  Master                 29             0   \n",
       "                                  Miss                   90             0   \n",
       "                                  Mr.                   154             0   \n",
       "                                  Mrs.                   94             0   \n",
       "                                  Professor               0             0   \n",
       "                                  Reverend                3             0   \n",
       "                                  Sister                  1             0   \n",
       "Stowaway                          Mr.                     3             0   \n",
       "Third                             Dr.                     1             0   \n",
       "                                  Master                 18             0   \n",
       "                                  Miss                   32             0   \n",
       "                                  Mr.                   149             0   \n",
       "                                  Mrs.                   36             0   \n",
       "Third (Distressed British Seaman) Mr.                     3             0   \n",
       "Victualling                       Master                  1             0   \n",
       "                                  Master (?)              4             0   \n",
       "                                  Miss                   11             0   \n",
       "                                  Mr.                   146             0   \n",
       "                                  Mrs.                    5             0   \n",
       "\n",
       "Fate                                                   Saved  \\\n",
       "Department/Class                  Title                        \n",
       "Band                              Mr.                      3   \n",
       "Deck                              Captain                  1   \n",
       "                                  Dr.                      0   \n",
       "                                  Master                   0   \n",
       "                                  Mr.                     36   \n",
       "Engineering                       Master                   0   \n",
       "                                  Mr.                    112   \n",
       "Saloon                            Captain                  0   \n",
       "                                  Commander                0   \n",
       "                                  Detective-Inspector      1   \n",
       "                                  Dr.                      3   \n",
       "                                  Father                   0   \n",
       "                                  Lady                     2   \n",
       "                                  Lieutenant               1   \n",
       "                                  Master                   2   \n",
       "                                  Miss                    13   \n",
       "                                  Mr.                     68   \n",
       "                                  Mr. (later Sir)          1   \n",
       "                                  Mrs.                    19   \n",
       "                                  Professor                0   \n",
       "                                  Reverend                 1   \n",
       "                                  Sir                      0   \n",
       "                                  Surgeon-Major            1   \n",
       "Second                            Dr.                      4   \n",
       "                                  Lieutenant               0   \n",
       "                                  Master                  18   \n",
       "                                  Miss                    48   \n",
       "                                  Mr.                     92   \n",
       "                                  Mrs.                    60   \n",
       "                                  Professor                2   \n",
       "                                  Reverend                 3   \n",
       "                                  Sister                   0   \n",
       "Stowaway                          Mr.                      0   \n",
       "Third                             Dr.                      0   \n",
       "                                  Master                   9   \n",
       "                                  Miss                    19   \n",
       "                                  Mr.                     85   \n",
       "                                  Mrs.                    21   \n",
       "Third (Distressed British Seaman) Mr.                      0   \n",
       "Victualling                       Master                   6   \n",
       "                                  Master (?)               0   \n",
       "                                  Miss                     4   \n",
       "                                  Mr.                    123   \n",
       "                                  Mrs.                     5   \n",
       "\n",
       "Fate                                                   Saved (died from trauma)  \n",
       "Department/Class                  Title                                          \n",
       "Band                              Mr.                                         0  \n",
       "Deck                              Captain                                     0  \n",
       "                                  Dr.                                         0  \n",
       "                                  Master                                      0  \n",
       "                                  Mr.                                         0  \n",
       "Engineering                       Master                                      0  \n",
       "                                  Mr.                                         0  \n",
       "Saloon                            Captain                                     0  \n",
       "                                  Commander                                   0  \n",
       "                                  Detective-Inspector                         0  \n",
       "                                  Dr.                                         0  \n",
       "                                  Father                                      0  \n",
       "                                  Lady                                        0  \n",
       "                                  Lieutenant                                  0  \n",
       "                                  Master                                      0  \n",
       "                                  Miss                                        0  \n",
       "                                  Mr.                                         1  \n",
       "                                  Mr. (later Sir)                             0  \n",
       "                                  Mrs.                                        0  \n",
       "                                  Professor                                   0  \n",
       "                                  Reverend                                    0  \n",
       "                                  Sir                                         0  \n",
       "                                  Surgeon-Major                               0  \n",
       "Second                            Dr.                                         0  \n",
       "                                  Lieutenant                                  0  \n",
       "                                  Master                                      1  \n",
       "                                  Miss                                        0  \n",
       "                                  Mr.                                         0  \n",
       "                                  Mrs.                                        1  \n",
       "                                  Professor                                   0  \n",
       "                                  Reverend                                    0  \n",
       "                                  Sister                                      0  \n",
       "Stowaway                          Mr.                                         0  \n",
       "Third                             Dr.                                         0  \n",
       "                                  Master                                      0  \n",
       "                                  Miss                                        0  \n",
       "                                  Mr.                                         0  \n",
       "                                  Mrs.                                        0  \n",
       "Third (Distressed British Seaman) Mr.                                         0  \n",
       "Victualling                       Master                                      0  \n",
       "                                  Master (?)                                  0  \n",
       "                                  Miss                                        0  \n",
       "                                  Mr.                                         1  \n",
       "                                  Mrs.                                        0  "
      ]
     },
     "execution_count": 38,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "dfl.pivot_table('Citizenship', index=['Department/Class', 'Title'], columns=['Fate'], aggfunc=len, fill_value=0)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The Lusitania was much more equitable than the Titanic when it came to classes and their survival rate. The Titanic allowed First Class passengers onto the boats first, and prioritized women and children over men, however the data indicates this was not the case for the Lusitania.\n",
    "\n",
    "The Lusitania had a 38.4% survival rate for first class, a 37.7% survival rate for second class, and a 36.2% survival rate for third. Those who worked on the boat (Band, Deck, Engineer, Victualling) actually had the highest survival rate of 41.9%, which is very much in contrast to the Titanic."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "#### Are there any groups that outperformed the survival of the latter group? (justify your response numerically)\n",
    "\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "On the Lusitania, it appeared to be \"survival of the fittest.\" Young people who worked on the ship had the highest rate of survival. Other crew members, and young passengers also had a high rate of survival."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### What does the group-wise survival rate imply about circumstances during these two accidents?"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "The Titanic attempted to adhere to social protocol like \"women and children first\" and honoring first class citizens over the others on the ship, which is seen in its higher rate of survival for women, children, and first class passengers. The more equitable distribution of the survival rate aboard the Lusitania implies that these ideas were not adhered to. Rather, everyone prioritized their own survival. It didn't benefit you in the sinking of the Lusitania to be a child, a woman, or wealthy."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python [Root]",
   "language": "python",
   "name": "Python [Root]"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 2
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython2",
   "version": "2.7.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 0
}
